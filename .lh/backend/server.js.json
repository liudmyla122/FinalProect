{
    "sourceFile": "backend/server.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1769702722000,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1769787698114,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -32,19 +32,19 @@\n     error: process.env.NODE_ENV === 'development' ? err.stack : undefined,\n   })\n })\n \n+app.get('/', (req, res) => {\n+  res.json({ message: 'Instagram API Server is running!' })\n+})\n+\n app.use((req, res) => {\n   res.status(404).json({\n     success: false,\n     message: 'Route not found',\n   })\n })\n \n-app.get('/', (req, res) => {\n-  res.json({ message: 'Instagram API Server is running!' })\n-})\n-\n const PORT = process.env.PORT || 3000\n const HOST = process.env.HOST || '127.0.0.1'\n \n const server = app.listen(PORT, HOST, () => {\n"
                },
                {
                    "date": 1770023731870,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -14,8 +14,10 @@\n })\n \n const app = express()\n \n+app.use(compression())\n+\n connectDB()\n \n app.use(express.json({ limit: '1tb' }))\n app.use(express.urlencoded({ extended: true, limit: '1tb' }))\n"
                }
            ],
            "date": 1769702722000,
            "name": "Commit-0",
            "content": "const express = require('express');\nconst connectDB = require('./src/config/db');\nrequire('dotenv').config();\n\nconst app = express();\n\n\nconnectDB();\n\n\napp.use(express.json({ limit: '1tb' }));\napp.use(express.urlencoded({ extended: true, limit: '1tb' }));\n\n\napp.use(require('cors')());\n\n\napp.use('/api/auth', require('./src/routes/authRoutes'));\napp.use('/api/search', require('./src/routes/searchRoutes'));\napp.use('/api/explore', require('./src/routes/exploreRoutes'));\napp.use('/api/users', require('./src/routes/userRoutes'));\napp.use('/api/posts', require('./src/routes/postRoutes'));\n\n\napp.use((err, req, res, next) => {\n  console.error('❌ Необработанная ошибка:', err);\n  console.error('Детали ошибки:', {\n    name: err.name,\n    message: err.message,\n    stack: err.stack\n  });\n  \n  res.status(err.status || 500).json({\n    success: false,\n    message: err.message || 'Internal server error',\n    error: process.env.NODE_ENV === 'development' ? err.stack : undefined\n  });\n});\n\n\napp.use((req, res) => {\n  res.status(404).json({\n    success: false,\n    message: 'Route not found'\n  });\n});\n\n\napp.get('/', (req, res) => {\n  res.json({ message: 'Instagram API Server is running!' });\n});\n\nconst PORT = process.env.PORT || 3000;\nconst HOST = process.env.HOST || '127.0.0.1';\n\nconst server = app.listen(PORT, HOST, () => {\n  console.log(`Server running on http://${HOST}:${PORT}`);\n});\n\nserver.on('error', (err) => {\n  if (err.code === 'EADDRINUSE') {\n    console.error(`\\n❌ Порт ${PORT} уже занят. Завершите другой процесс на порту ${PORT}:\\n   macOS/Linux: lsof -i :${PORT}   затем   kill -9 <PID>\\n   Или закройте другой терминал с бэкендом и запустите снова.\\n`);\n  } else if (err.code === 'EPERM') {\n    console.error(`\\n❌ Нет прав на порт ${PORT}. Запустите терминал от имени администратора или проверьте настройки системы.\\n`);\n  } else {\n    console.error('\\n❌ Ошибка сервера:', err.message);\n  }\n  process.exit(1);\n});\n"
        }
    ]
}