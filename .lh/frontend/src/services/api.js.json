{
    "sourceFile": "frontend/src/services/api.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1769705897691,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1769786790065,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -185,5 +185,12 @@\n     return response.data\n   },\n }\n \n+export const notificationsAPI = {\n+  getNotifications: async () => {\n+    const response = await api.get('/notifications')\n+    return response.data\n+  },\n+}\n+\n export default api\n"
                },
                {
                    "date": 1770727945008,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -59,10 +59,13 @@\n     const response = await api.post('/auth/reset-password', { emailOrUsername })\n     return response.data\n   },\n \n-  updateAvatar: async (avatarBase64) => {\n-    const response = await api.put('/auth/avatar', { avatar: avatarBase64 })\n+  updateAvatar: async (avatarBase64, avatarType) => {\n+    const response = await api.put('/auth/avatar', {\n+      avatar: avatarBase64,\n+      avatarType,\n+    })\n     return response.data\n   },\n \n   updateProfiles: async (profiles, organization) => {\n"
                }
            ],
            "date": 1769705897691,
            "name": "Commit-0",
            "content": "import axios from 'axios';\n\nconst API_URL = '/api';\n\nconst api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n\napi.interceptors.request.use((config) => {\n  const token = localStorage.getItem('token');\n  if (token) {\n    config.headers.Authorization = `Bearer ${token}`;\n  }\n  return config;\n});\n\n\napi.interceptors.response.use(\n  (response) => response,\n  (error) => {\n    if (error.response?.status === 401) {\n      const msg = error.response?.data?.message || '';\n      if (msg === 'User not found' || msg === 'Token is not valid' || msg === 'No token provided, authorization denied') {\n        localStorage.removeItem('token');\n        localStorage.removeItem('user');\n        if (!window.location.pathname.startsWith('/login') && !window.location.pathname.startsWith('/register')) {\n          window.location.href = '/login';\n        }\n      }\n    }\n    return Promise.reject(error);\n  }\n);\n\nexport const authAPI = {\n  register: async (userData) => {\n    const response = await api.post('/auth/register', userData);\n    return response.data;\n  },\n  login: async (email, password) => {\n    const response = await api.post('/auth/login', { email, password });\n    return response.data;\n  },\n  getCurrentUser: async () => {\n    const response = await api.get('/auth/me');\n    return response.data;\n  },\n  resetPassword: async (emailOrUsername) => {\n    const response = await api.post('/auth/reset-password', { emailOrUsername });\n    return response.data;\n  },\n\n  \n  updateAvatar: async (avatarBase64) => {\n    const response = await api.put('/auth/avatar', { avatar: avatarBase64 });\n    return response.data;\n  },\n\n \n  updateProfiles: async (profiles) => {\n    const response = await api.put('/auth/profiles', { profiles });\n    return response.data;\n  },\n};\n\nexport const searchAPI = {\n  \n  searchUsers: async (query) => {\n    const response = await api.get(`/search/users?q=${encodeURIComponent(query)}`);\n    return response.data;\n  },\n};\n\nexport const usersAPI = {\n \n  getProfileByUsername: async (username) => {\n    const response = await api.get(`/users/profile/${encodeURIComponent(username)}`);\n    return response.data;\n  },\n \n  getUserPosts: async (userId) => {\n    const response = await api.get(`/users/${encodeURIComponent(userId)}/posts`);\n    return response.data;\n  },\n \n  toggleFollow: async (userId) => {\n    const response = await api.post(`/users/${encodeURIComponent(userId)}/follow`);\n    return response.data;\n  },\n};\n\nexport const exploreAPI = {\n \n  getExplorePosts: async (limit = 20) => {\n    const response = await api.get(`/explore/posts?limit=${limit}`);\n    return response.data;\n  },\n};\n\nexport const postsAPI = {\n  \n  createPost: async ({ imageBase64, images, caption, title, profileId }) => {\n    const response = await api.post('/posts', {\n      image: imageBase64, \n      images: images || (imageBase64 ? [imageBase64] : []), \n      caption: caption || '',\n      title: title || '',\n      profileId: profileId || undefined,\n    });\n    return response.data;\n  },\n\n  \n  getMyPosts: async (profileId) => {\n    const url = profileId ? `/posts/me?profileId=${encodeURIComponent(profileId)}` : '/posts/me';\n    const response = await api.get(url);\n    return response.data;\n  },\n \n  updatePost: async (postId, data) => {\n    const response = await api.put(`/posts/${postId}`, data);\n    return response.data;\n  },\n\n \n  getFeed: async (limit = 20, skip = 0) => {\n    const response = await api.get(`/posts/feed?limit=${limit}&skip=${skip}`);\n    return response.data;\n  },\n\n  \n  deletePost: async (id) => {\n    const response = await api.delete(`/posts/${id}`);\n    return response.data;\n  },\n\n  \n  getPostById: async (id) => {\n    const response = await api.get(`/posts/${id}`);\n    return response.data;\n  },\n\n  \n  addComment: async (postId, text, parentCommentId = null) => {\n    const response = await api.post(`/posts/${postId}/comments`, { \n      text,\n      parentCommentId \n    });\n    return response.data;\n  },\n\n  \n  incrementViews: async (postId) => {\n    const response = await api.post(`/posts/${postId}/views`);\n    return response.data;\n  },\n\n  \n  toggleLike: async (postId) => {\n    const response = await api.post(`/posts/${postId}/like`);\n    return response.data;\n  },\n};\n\nexport default api;\n"
        }
    ]
}